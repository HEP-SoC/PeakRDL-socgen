addrmap apb_subsystem #(
    base_bus BUS = base_bus'{name:"apb_bus", ADDR_WIDTH:32, DATA_WIDTH:32}
    ){
    name = "APB subsystem";
    bus_inst = BUS;
    subsystem;

    // Memories
<%for( $j = 0; $j < 4; $j += 1 ) {%>
    apb_memory #(
        .MEM_SIZE(1024),
        .DATA_WIDTH(32),
        .ADDR_WIDTH(32),
        .ID(<%=$j%>),
        .BUS(BUS)
        ) apb_mem<%=$j%>;
<% } %>



        clk clk;
        rstn rstn;

};

