addrmap nmi_system #(
    base_bus BUS = base_bus'{name:"nmi_bus", ADDR_WIDTH:32, DATA_WIDTH:32}
){
    name = "NMI system";
    subsystem;
    bus_inst = BUS;

    /* nmi_master cpu; */
    // Memories
    nmi_memory #(
        .MEM_SIZE(1024),
        .DATA_WIDTH(32),
        .ADDR_WIDTH(32),
        .ID(9000),
        .BUS(base_bus'{name:"nmi_bus", ADDR_WIDTH:32, DATA_WIDTH:32})
        ) bootmem;

    nmi_memory #(
        .MEM_SIZE(64000),
        .DATA_WIDTH(32),
        .ADDR_WIDTH(32),
        .ID(8000),
        .BUS(base_bus'{name:"nmi_bus", ADDR_WIDTH:32, DATA_WIDTH:32})
        ) mem0;

    apb_memory #(
        .MEM_SIZE(1024),
        .DATA_WIDTH(32),
        .ADDR_WIDTH(32),
        .ID(55),
        .BUS(base_bus'{name:"apb_bus", ADDR_WIDTH:32, DATA_WIDTH:32})
        ) apb_mem_in_nmi;


    apb_subsystem apb_subsys;

        clk clk;
        rstn rstn;

};
